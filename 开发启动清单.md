# å¼€å‘å¯åŠ¨æ¸…å•

## ç«‹å³å¼€å§‹çš„æ­¥éª¤

### 1ï¸âƒ£ åˆ›å»ºæ•°æ®åº“ï¼ˆ5 åˆ†é’Ÿï¼‰

```bash
# ç™»å½• MySQL
mysql -u root -p

# åœ¨ MySQL å‘½ä»¤è¡Œä¸­æ‰§è¡Œ
CREATE DATABASE IF NOT EXISTS inventory_hub CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# ä½¿ç”¨æ•°æ®åº“
USE inventory_hub;

# åˆ›å»ºæ‰€æœ‰è¡¨ï¼ˆè§ä¸‹æ–¹å®Œæ•´ SQLï¼‰
```

<details>
<summary>ğŸ“‹ ç‚¹å‡»æŸ¥çœ‹å®Œæ•´æ•°æ®åº“åˆ›å»ºè„šæœ¬</summary>

```sql
-- 1. å•†å“åˆ†ç±»è¡¨
CREATE TABLE categories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    UNIQUE KEY unique_category_name (name, is_deleted)
);

-- 2. è¿›è´§æ¸ é“è¡¨
CREATE TABLE suppliers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    UNIQUE KEY unique_supplier_name (name, is_deleted)
);

-- 3. å•†å“è¡¨ï¼ˆå•†å“ä¸éœ€è¦å›¾ç‰‡ï¼‰
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    category_id INT NOT NULL,
    name VARCHAR(200) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (category_id) REFERENCES categories(id),
    INDEX idx_category_id (category_id)
);

-- 4. è¿›è´§è¡¨
CREATE TABLE purchases (
    id INT AUTO_INCREMENT PRIMARY KEY,
    supplier_id INT NOT NULL,
    purchase_date DATE NOT NULL,
    purchase_no VARCHAR(100) NOT NULL,
    total_amount DECIMAL(15,2) NOT NULL,
    currency_type VARCHAR(10) NOT NULL DEFAULT 'JPY',
    exchange_rate DECIMAL(10,4) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (supplier_id) REFERENCES suppliers(id),
    UNIQUE KEY unique_purchase_no (purchase_no),
    INDEX idx_supplier_id (supplier_id),
    INDEX idx_purchase_date (purchase_date)
);

-- 5. åœ¨åº“è¡¨
CREATE TABLE inventory (
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT NOT NULL,
    purchase_id INT NOT NULL,
    purchase_amount DECIMAL(15,2) NOT NULL,
    purchase_quantity INT NOT NULL CHECK (purchase_quantity > 0),
    unit_cost DECIMAL(15,2) NOT NULL,
    stock_quantity INT NOT NULL CHECK (stock_quantity >= 0),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (product_id) REFERENCES products(id),
    FOREIGN KEY (purchase_id) REFERENCES purchases(id),
    INDEX idx_product_id (product_id),
    INDEX idx_purchase_id (purchase_id)
);

-- 6. è®¢å•è¡¨
CREATE TABLE orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_no VARCHAR(100) NOT NULL,
    image_url VARCHAR(500) NULL,
    name VARCHAR(200) NOT NULL,
    revenue DECIMAL(15,2) NOT NULL,
    total_cost DECIMAL(15,2) NULL,
    transaction_time DATETIME NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    UNIQUE KEY unique_order_no (order_no),
    INDEX idx_transaction_time (transaction_time),
    INDEX idx_orders_cost_time (total_cost, transaction_time)
);

-- 7. è®¢å•è¯¦ç»†è¡¨
CREATE TABLE order_details (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    inventory_id INT NOT NULL,
    product_id INT NOT NULL,
    unit_price DECIMAL(15,2) NOT NULL,
    quantity INT NOT NULL CHECK (quantity > 0),
    packaging_cost DECIMAL(15,2) DEFAULT 0,
    other_cost DECIMAL(15,2) DEFAULT 0,
    subtotal_cost DECIMAL(15,2) NOT NULL,
    notes TEXT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (order_id) REFERENCES orders(id),
    FOREIGN KEY (inventory_id) REFERENCES inventory(id),
    FOREIGN KEY (product_id) REFERENCES products(id),
    INDEX idx_order_id (order_id),
    INDEX idx_inventory_id (inventory_id),
    INDEX idx_product_id (product_id),
    INDEX idx_order_details_order_inventory (order_id, inventory_id)
);
```

</details>

---

### 2ï¸âƒ£ åˆ›å»ºåç«¯é¡¹ç›®ï¼ˆ10 åˆ†é’Ÿï¼‰

```bash
# åˆ›å»º ASP.NET Core Web API é¡¹ç›®
cd /Users/implmbp219/Documents/Projects/InventoryHub
dotnet new webapi -n InventoryHub.API
cd InventoryHub.API

# å®‰è£…å¿…è¦çš„ NuGet åŒ…
dotnet add package Pomelo.EntityFrameworkCore.MySql
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet add package AutoMapper.Extensions.Microsoft.DependencyInjection
dotnet add package Swashbuckle.AspNetCore
dotnet add package Newtonsoft.Json

# æµ‹è¯•è¿è¡Œ
dotnet run
```

**æœŸæœ›ç»“æœ**:

- æµè§ˆå™¨è®¿é—® `https://localhost:5001/swagger` çœ‹åˆ° Swagger æ–‡æ¡£
- çœ‹åˆ°é»˜è®¤çš„ WeatherForecast API

---

### 3ï¸âƒ£ åˆ›å»ºå‰ç«¯é¡¹ç›®ï¼ˆ10 åˆ†é’Ÿï¼‰

```bash
# åˆ›å»º Next.js é¡¹ç›®
cd /Users/implmbp219/Documents/Projects/InventoryHub
npx create-next-app@latest inventory-hub-frontend

# åœ¨æç¤ºä¸­é€‰æ‹©ï¼š
# âœ… TypeScript: Yes
# âœ… ESLint: Yes
# âœ… Tailwind CSS: Yes
# âœ… src/ directory: No
# âœ… App Router: Yes
# âœ… import alias: Yes (@/*)

cd inventory-hub-frontend

# å®‰è£… Material UI
npm install @mui/material @emotion/react @emotion/styled
npm install @mui/icons-material
npm install @mui/x-data-grid

# å®‰è£…å…¶ä»–ä¾èµ–
npm install axios
npm install react-hook-form zod @hookform/resolvers
npm install zustand
npm install recharts
npm install date-fns
npm install xlsx

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev
```

**æœŸæœ›ç»“æœ**:

- æµè§ˆå™¨è®¿é—® `http://localhost:3000` çœ‹åˆ° Next.js é»˜è®¤é¡µé¢

---

### 4ï¸âƒ£ æ±‡ç‡ API é…ç½®

æˆ‘ä»¬å°†ä½¿ç”¨å…è´¹çš„æ±‡ç‡ API è·å– JPY å¯¹ CNY çš„æ±‡ç‡ã€‚

**æ¨è API**:

- **ExchangeRate-API**: https://www.exchangerate-api.com/
  - å…è´¹é¢åº¦: 1500 è¯·æ±‚/æœˆ
  - æ— éœ€æ³¨å†Œå³å¯ä½¿ç”¨
  - ç«¯ç‚¹ç¤ºä¾‹: `https://api.exchangerate-api.com/v4/latest/JPY`

**å¤‡é€‰æ–¹æ¡ˆ**:

- **Fixer.io**: https://fixer.io/ ï¼ˆéœ€æ³¨å†Œï¼‰
- **Open Exchange Rates**: https://openexchangerates.org/ ï¼ˆéœ€æ³¨å†Œï¼‰

**å‰ç«¯ç¯å¢ƒå˜é‡é…ç½®**:

```env
# .env.local
NEXT_PUBLIC_API_URL=http://localhost:5000/api
NEXT_PUBLIC_EXCHANGE_RATE_API=https://api.exchangerate-api.com/v4/latest/CNY
```

**åç«¯ç¯å¢ƒå˜é‡é…ç½®**:

```json
// appsettings.json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=inventory_hub;User=root;Password=your_password;"
  },
  "ExchangeRateApi": {
    "BaseUrl": "https://api.exchangerate-api.com/v4/latest/",
    "BaseCurrency": "JPY",
    "TargetCurrency": "CNY"
  }
}
```

---

## å¼€å‘å»ºè®®æµç¨‹

### æ¨èï¼šæŒ‰æ¨¡å—å¹¶è¡Œå¼€å‘

#### ç¬¬ 1 å‘¨ï¼šåŸºç¡€è®¾æ–½ + åˆ†ç±»ç®¡ç†ï¼ˆæœ€ç®€å•çš„æ¨¡å—ï¼‰

**åç«¯**:

1. é…ç½® DbContext å’Œæ•°æ®åº“è¿æ¥
2. åˆ›å»º Category å®ä½“æ¨¡å‹
3. åˆ›å»º CategoryController å’Œ CategoryService
4. æµ‹è¯• CRUD API

**å‰ç«¯**:

1. é…ç½® Material UI ä¸»é¢˜
2. åˆ›å»ºå¸ƒå±€ç»„ä»¶ï¼ˆHeader, Sidebarï¼‰
3. åˆ›å»ºåˆ†ç±»åˆ—è¡¨é¡µé¢
4. æµ‹è¯•å‰åç«¯è”è°ƒ

**é‡Œç¨‹ç¢‘**: åˆ†ç±»ç®¡ç†åŠŸèƒ½å®Œæ•´å¯ç”¨

---

#### ç¬¬ 2 å‘¨ï¼šè¿›è´§æ¸ é“ + å•†å“ç®¡ç†

**åç«¯**:

1. åˆ›å»º Supplier å’Œ Product çš„å®ä½“ã€æœåŠ¡ã€æ§åˆ¶å™¨
2. å®ç°å…³è”æŸ¥è¯¢ï¼ˆå•†å“æŒ‰åˆ†ç±»ç­›é€‰ï¼‰

**å‰ç«¯**:

1. åˆ›å»ºè¿›è´§æ¸ é“é¡µé¢ï¼ˆå¤ç”¨åˆ†ç±»é¡µé¢æ¶æ„ï¼‰
2. åˆ›å»ºå•†å“é¡µé¢ï¼ˆå¸¦åˆ†ç±»ç­›é€‰ï¼‰
3. å®ç°è¡¨å•éªŒè¯

**é‡Œç¨‹ç¢‘**: åŸºç¡€æ•°æ®ç®¡ç†å…¨éƒ¨å®Œæˆ

---

#### ç¬¬ 3 å‘¨ï¼šè¿›è´§ç®¡ç† + æ±‡ç‡é›†æˆ

**åç«¯**:

1. åˆ›å»º Purchase å®ä½“ã€æœåŠ¡ã€æ§åˆ¶å™¨
2. å®ç°æ±‡ç‡ API é›†æˆæœåŠ¡
3. æä¾›è·å–å½“æ—¥æ±‡ç‡çš„ API

**å‰ç«¯**:

1. åˆ›å»ºè¿›è´§åˆ—è¡¨é¡µé¢
2. é›†æˆæ±‡ç‡ APIï¼ˆæ˜¾ç¤ºå®æ—¶æ±‡ç‡ï¼‰
3. å®ç°è¿›è´§è¡¨å•ï¼ˆå«æ—¥æœŸã€æ±‡ç‡ï¼‰
4. LocalStorage ä¿å­˜æ±‡ç‡

**é‡Œç¨‹ç¢‘**: è¿›è´§ç®¡ç†å®Œæˆï¼Œæ±‡ç‡è‡ªåŠ¨è·å–

---

#### ç¬¬ 4 å‘¨ï¼šåœ¨åº“ç®¡ç†ï¼ˆå¤æ‚é€»è¾‘ï¼‰

**åç«¯**:

1. åˆ›å»º Inventory å®ä½“ã€æœåŠ¡ã€æ§åˆ¶å™¨
2. å®ç°æ‰¹é‡åˆ›å»º API
3. å®ç°å•ä»¶æˆæœ¬è‡ªåŠ¨è®¡ç®—
4. æ·»åŠ è¿›è´§æ”¯å‡ºæ€»å’ŒéªŒè¯

**å‰ç«¯**:

1. åˆ›å»ºåœ¨åº“åˆ—è¡¨é¡µé¢
2. å®ç°å¤šè¡Œç¼–è¾‘è¡¨æ ¼
3. å®æ—¶è®¡ç®—ï¼šå•ä»¶æˆæœ¬ã€æ”¯å‡ºæ€»å’Œã€å·®é¢
4. ä¿å­˜æŒ‰é’®æ¿€æ´»é€»è¾‘ï¼ˆå·®é¢ = 0ï¼‰

**é‡Œç¨‹ç¢‘**: åœ¨åº“ç®¡ç†å®Œæˆï¼Œæˆæœ¬è®¡ç®—æ­£ç¡®

---

#### ç¬¬ 5-6 å‘¨ï¼šè®¢å•æ ¸å¿ƒåŠŸèƒ½ï¼ˆæœ€å¤æ‚ï¼‰

**åç«¯**:

1. åˆ›å»º Order å’Œ OrderDetail å®ä½“
2. å®ç°å¤æ‚çš„ä¿å­˜é€»è¾‘ï¼ˆäº‹åŠ¡ã€åº“å­˜æ‰£å‡ï¼‰
3. å®ç°å¹¶å‘æ§åˆ¶ï¼ˆè¡Œé”ï¼‰
4. å®ç°åº“å­˜å›æ»šæœºåˆ¶

**å‰ç«¯**:

1. åˆ›å»ºè®¢å•åˆ—è¡¨é¡µé¢ï¼ˆå¸¦æ’åºã€ç­›é€‰ï¼‰
2. åˆ›å»ºè®¢å•è¯¦ç»†ç¼–è¾‘é¡µ
   - äºŒçº§ä¸‹æ‹‰èœå•ï¼ˆåˆ†ç±» â†’ å•†å“ï¼‰
   - Zustand çŠ¶æ€ç®¡ç†
   - ä¹è§‚ UI æ›´æ–°
3. å®ç°å®æ—¶è®¡ç®—å’ŒéªŒè¯
4. åˆ›å»ºè®¢å•è¯¦ç»†æŸ¥è¯¢é¡µï¼ˆåªè¯»ï¼‰

**é‡Œç¨‹ç¢‘**: è®¢å•ç®¡ç†å®Œæ•´å¯ç”¨ï¼Œåº“å­˜æ‰£å‡æ­£ç¡®

---

#### ç¬¬ 7 å‘¨ï¼šDashboard + ä¼˜åŒ–

**åç«¯**:

1. åˆ›å»º Dashboard APIï¼ˆç»Ÿè®¡æ•°æ®ï¼‰
2. å®ç°æ•°æ®å¯¼å‡ºï¼ˆExcel/CSVï¼‰

**å‰ç«¯**:

1. åˆ›å»º Dashboard é¡µé¢
2. é›†æˆå›¾è¡¨ï¼ˆæœˆåº¦åˆ©æ¶¦ï¼‰
3. å®ç°æ•°æ®å¯¼å‡ºåŠŸèƒ½
4. æ€§èƒ½ä¼˜åŒ–ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–

**é‡Œç¨‹ç¢‘**: å®Œæ•´ç³»ç»Ÿä¸Šçº¿

---

## å…³é”®æŠ€æœ¯ç‚¹

### 1. æ±‡ç‡ API é›†æˆç¤ºä¾‹

**åç«¯æœåŠ¡**:

```csharp
public class ExchangeRateService
{
    private readonly HttpClient _httpClient;

    public async Task<decimal> GetJPYtoCNYRate()
    {
        var response = await _httpClient.GetAsync("https://api.exchangerate-api.com/v4/latest/JPY");
        var data = await response.Content.ReadFromJsonAsync<ExchangeRateResponse>();
        return data.Rates["CNY"];
    }
}
```

**å‰ç«¯è°ƒç”¨**:

```typescript
// lib/exchangeRate.ts
export async function getCurrentExchangeRate(): Promise<number> {
  const response = await fetch(
    "https://api.exchangerate-api.com/v4/latest/JPY"
  );
  const data = await response.json();
  return data.rates.CNY;
}
```

### 2. Material UI ä¸»é¢˜é…ç½®

```typescript
// lib/theme.ts
import { createTheme } from "@mui/material/styles";

export const theme = createTheme({
  palette: {
    primary: {
      main: "#1976d2",
    },
    secondary: {
      main: "#dc004e",
    },
  },
  typography: {
    fontFamily: [
      "-apple-system",
      "BlinkMacSystemFont",
      '"Segoe UI"',
      "Roboto",
      '"Helvetica Neue"',
      "Arial",
      "sans-serif",
    ].join(","),
  },
});
```

### 3. Zustand Store ç¤ºä¾‹

```typescript
// stores/orderDetailStore.ts
import { create } from "zustand";

interface OrderDetail {
  id: string;
  productId: number;
  inventoryId: number;
  unitPrice: number;
  quantity: number;
  packagingCost: number;
  otherCost: number;
  subtotalCost: number;
  notes: string;
}

interface OrderDetailStore {
  details: OrderDetail[];
  addDetail: () => void;
  updateDetail: (id: string, data: Partial<OrderDetail>) => void;
  deleteDetail: (id: string) => void;
  calculateTotalCost: () => number;
}

export const useOrderDetailStore = create<OrderDetailStore>((set, get) => ({
  details: [],
  addDetail: () => {
    // å®ç°é€»è¾‘
  },
  updateDetail: (id, data) => {
    // å®ç°é€»è¾‘
  },
  deleteDetail: (id) => {
    // å®ç°é€»è¾‘
  },
  calculateTotalCost: () => {
    return get().details.reduce((sum, d) => sum + d.subtotalCost, 0);
  },
}));
```

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

âœ… **ç°åœ¨å°±å¯ä»¥å¼€å§‹**:

1. æ‰§è¡Œæ•°æ®åº“åˆ›å»ºè„šæœ¬
2. åˆ›å»ºåç«¯é¡¹ç›®
3. åˆ›å»ºå‰ç«¯é¡¹ç›®
4. æµ‹è¯•æ±‡ç‡ API è¿æ¥

**éœ€è¦å¸®åŠ©ï¼Ÿ** å‘Šè¯‰æˆ‘æ‚¨æƒ³ä»å“ªä¸ªéƒ¨åˆ†å¼€å§‹ï¼Œæˆ‘ä¼šæä¾›è¯¦ç»†çš„ä»£ç å®ç°ï¼
